{% extends 'base.html.twig' %}

{% block title %}Vehicule index{% endblock %}

{% block body %}
<a class="btn btn-success"  href="{{ path('vehicule_new') }}"><i class="fa fa-plus"></i> Ajouter un Vehicule</a>
<br><br>
<b>Filtrer : </b><a href="{{ path('vehicule_index') }}" class="btn btn-{% if filer_city == '' %}primary{% else %}light{% endif %}">Tous les véhicule</a> <a href="{{ path('vehicule_index') }}?city=Marseille" class="btn btn-{% if filer_city == 'Marseille' %}primary {% else %}light {% endif %}">Marseille</a> <a href="{{ path('vehicule_index') }}?city=Bastia" class="btn btn-{% if filer_city == 'Bastia' %}primary {% else %}light {% endif %} ">Bastia</a>
<br><br>
<div class="container-fluid">
    <div class="panel">
        <table id="dataTable" class="table table-striped table-bordered dt-center">
            <thead class="thead-dark">
                <tr>
                    <th>Vehicule</th>
                    <th>Parc</th>
                    <th>Etat</th>
                    <th>actions</th>
                </tr>
            </thead>
            <tbody>
            {% for vehicule in vehicules %}
                <tr>
                    <td>{{ vehicule.model }} {{ vehicule.immatriculation}}</td>
                    <td>{{vehicule.parcStationnementVille}}</td>
                    <td>
                    {% if vehicule.status == 0 %}
                     <span class="vehicule-reserved">Resérvé</span> 
                     {% else %}
                     <span class="vehicule-free">Libre</span>   
                    {% endif %}
                    </td>
                    <td>
                        <div class="dropdown">
                        <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                            Action
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                            <li><a href="{{ path('vehicule_show', {'id': vehicule.id}) }}"><i class="fa fa-search"></i> Afficher le vehicule</a>
                            <li><a href="{{ path('vehicule_edit', {'id': vehicule.id}) }}"><span class="glyphicon glyphicon-pencil"></span> Modifier le vehicule</a>
                            <li>
                            <a href="#">
                                <form method="post" action="{{ path('vehicule_delete', {'id': vehicule.id}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
                                    <input type="hidden" name="_method" value="DELETE">
                                    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ vehicule.id) }}">
                                    <i class="fa fa-trash"></i> 
                                    <button style="border:none; background:none; padding-left:14px;"> Supprimer</button>
                                </form>
                            </a>
                            </li>
                        </ul>
                        </div>
                 </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    </div>
{% endblock %}
